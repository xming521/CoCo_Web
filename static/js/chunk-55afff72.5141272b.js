(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55afff72"],{"2dd7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-button",{staticStyle:{"margin-bottom":"40px"},attrs:{type:"primary"},on:{click:t.fetchAppname}},[t._v("创建计划任务")]),a("el-dialog",{attrs:{title:"创建计划任务",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{model:t.form,"element-loading-text":"Loading"}},[a("el-form-item",{attrs:{label:"应用名称","label-width":"150px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.app_name,callback:function(e){t.$set(t.form,"app_name",e)},expression:"form.app_name"}},t._l(t.app_names,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"触发器类型"}},[a("div",[a("el-radio",{attrs:{label:"interval",border:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("定时触发")]),a("el-radio",{attrs:{label:"cron",border:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("cron表达式")])],1)]),a("el-form-item",{attrs:{label:"触发间隔（每）","label-width":"100px"}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticClass:"input-mini",model:{value:t.form.param.seconds,callback:function(e){t.$set(t.form.param,"seconds",e)},expression:"form.param.seconds"}}),a("el-form-item",{attrs:{label:"秒","label-width":"15px"}}),a("el-input",{staticClass:"input-mini",model:{value:t.form.param.minutes,callback:function(e){t.$set(t.form.param,"minutes",e)},expression:"form.param.minutes"}}),a("el-form-item",{attrs:{label:"分"}}),a("el-input",{staticClass:"input-mini",model:{value:t.form.param.hours,callback:function(e){t.$set(t.form.param,"hours",e)},expression:"form.param.hours"}}),a("el-form-item",{attrs:{label:"时"}}),a("el-input",{staticClass:"input-mini",model:{value:t.form.param.days,callback:function(e){t.$set(t.form.param,"days",e)},expression:"form.param.days"}}),a("el-form-item",{attrs:{label:"天"}})],1)],1),a("el-form-item",{attrs:{label:"corn表达式"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:""},model:{value:t.form.param.crontab_expression,callback:function(e){t.$set(t.form.param,"crontab_expression",e)},expression:"form.param.crontab_expression"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID","min-width":"25%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"App名称","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"}},[t._v(t._s(e.row.app_name))])]}}])}),a("el-table-column",{attrs:{label:"下次运行时间","min-width":"15%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.next_run_time)+" ")]}}])}),a("el-table-column",{attrs:{label:"触发器","min-width":"20%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.trigger))])]}}])}),a("el-table-column",{attrs:{align:"center","min-width":"25%",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"success",disabled:"running"==e.row.status}},[t._v("启动 ")]),a("el-button",{attrs:{size:"small",type:"danger",disabled:"stopped"==e.row.status}},[t._v("停止 ")]),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete-solid"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1)],1)},l=[],i=a("b775");function r(t){return Object(i["a"])({url:"/scheduler/create",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/scheduler/get_jobs",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/app_getname",method:"get",params:t})}function m(t){return Object(i["a"])({url:"/scheduler/delete_jobs",method:"get",params:t})}var c={name:"index",data:function(){return{list:null,listLoading:!0,disr:!1,diss:!1,dialogFormVisible:!1,form:{app_name:"",type:"",param:{hours:0,days:0,minutes:0,seconds:0,crontab_expression:""}},app_names:[],app:app}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,o().then((function(e){t.list=e.data.res,t.listLoading=!1}))},fetchAppname:function(){var t=this;this.dialogFormVisible=!0,this.listLoading=!0,s().then((function(e){t.app_names=e.data.res,t.listLoading=!1}))},submit:function(){var t=this;r(this.form).then((function(e){t.dialogFormVisible=!1,t.fetchData()}))},handleDelete:function(t,e){var a=this;m({id:e.id}).then((function(t){a.fetchData()}))}}},u=c,d=(a("977a"),a("2877")),p=Object(d["a"])(u,n,l,!1,null,"3fbb45e0",null);e["default"]=p.exports},"977a":function(t,e,a){"use strict";a("d241")},d241:function(t,e,a){}}]);