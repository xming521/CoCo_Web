(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bf40956"],{"685c":function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return l}));var r=n("b775");function a(t){return Object(r["a"])({url:"/image/pull",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/image/getlist",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/image/getname",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/image/delete",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/image/build",method:"get",params:t})}},7723:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap",attrs:{id:"app"}},["output-small"===t.log_display_id?n("el-row",[n("el-col",{attrs:{span:14}},[n("div",{staticClass:"content"},[n("div",{staticClass:"input-card",attrs:{id:"input"}},[n("div",{staticClass:"input_title"},[n("input",{attrs:{type:"button",value:"源代码"}}),n("el-tag",{staticClass:"status-tags",staticStyle:{zoom:"1.2","margin-left":"16vw"},attrs:{type:t._f("statusFilter")(t.status),effect:"dark"}},[n("i",{class:t._f("statusFilter2")(t.status)}),t._v(" "+t._s(t.status)+" ")]),n("el-button",{attrs:{id:"run",type:"primary"},on:{click:t.submit_code}},[t._v("运行")])],1),n("div",{staticClass:"input_area"},[n("div",{staticClass:"codemirror",attrs:{id:"editor"}},[n("codemirror",{attrs:{options:t.cmOption},on:{input:t.onCmCodeChange},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)])])])]),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"input-card",attrs:{id:"app-info"}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"8vw","label-position":"left"}},[n("el-form-item",{attrs:{label:"应用名称"}},[n("el-input",{attrs:{disabled:t.disable_appname},model:{value:t.form.app_name,callback:function(e){t.$set(t.form,"app_name",e)},expression:"form.app_name"}})],1),n("el-form-item",{attrs:{label:"运行镜像"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.image_name,callback:function(e){t.$set(t.form,"image_name",e)},expression:"form.image_name"}},t._l(t.images_list,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t,disabled:t.disabled}})})),1)],1),n("el-form-item",{attrs:{label:"运行指令"}},[n("el-input",{model:{value:t.form.run_command,callback:function(e){t.$set(t.form,"run_command",e)},expression:"form.run_command"}})],1),n("el-form-item",{attrs:{label:"运行超时(s)"}},[n("el-input",{model:{value:t.form.timeout,callback:function(e){t.$set(t.form,"timeout",e)},expression:"form.timeout"}})],1),n("el-row",[n("el-col",{attrs:{span:14}},[n("el-form-item",{attrs:{label:"访问外网能力"}},[n("el-switch",{model:{value:t.form.use_network,callback:function(e){t.$set(t.form,"use_network",e)},expression:"form.use_network"}})],1)],1),n("el-col",{attrs:{span:10}},[n("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[n("el-radio-group",{model:{value:t.form.network,callback:function(e){t.$set(t.form,"network",e)},expression:"form.network"}},[n("el-radio-button",{attrs:{label:"bridge"}}),n("el-radio-button",{attrs:{label:"host"}}),n("el-radio-button",{attrs:{label:"none"}})],1),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("配置网络")])],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:14}},[n("el-form-item",{attrs:{label:"自定义应用性能"}},[n("el-switch",{model:{value:t.form.control_performance,callback:function(e){t.$set(t.form,"control_performance",e)},expression:"form.control_performance"}})],1)],1),n("el-col",{attrs:{span:10}},[n("el-popover",{attrs:{placement:"left",width:"800",trigger:"click"}},[n("div",{staticClass:"popover"},[n("el-form-item",{attrs:{label:"CPU数量"}},[n("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},model:{value:t.form.cpu_count,callback:function(e){t.$set(t.form,"cpu_count",e)},expression:"form.cpu_count"}})],1),n("el-form-item",{attrs:{label:"cpu百分比"}},[n("el-slider",{attrs:{step:25,marks:t.marks,"show-stops":""},model:{value:t.form.cpu_percent,callback:function(e){t.$set(t.form,"cpu_percent",e)},expression:"form.cpu_percent"}})],1),n("el-form-item",{attrs:{label:"内存占用"}},[n("el-radio-group",{model:{value:t.form.mem_limit,callback:function(e){t.$set(t.form,"mem_limit",e)},expression:"form.mem_limit"}},[n("el-radio-button",{attrs:{label:"128m"}}),n("el-radio-button",{attrs:{label:"256m"}}),n("el-radio-button",{attrs:{label:"512m"}}),n("el-radio-button",{attrs:{label:"1g"}}),n("el-radio-button",{attrs:{label:"2g"}})],1)],1)],1),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("配置性能")])],1)],1)],1)],1)],1)])],1):t._e(),n("el-row",[n("div",{staticClass:"input-card",attrs:{id:t.log_display_id}},[n("div",{staticClass:"input_title"},[n("input",{attrs:{type:"button",value:"运行结果"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-up"},on:{click:t.log_display}})],1),n("div",{staticClass:"out_area",attrs:{id:"result"}},[t._v(t._s(t.response_info))])])])],1)},a=[],o=(n("d3b7"),n("8f94")),i=(n("a7be"),n("db91"),n("cc10"),n("f6b6"),n("31c5"),n("10b2"),n("4ba6"),n("8c33"),n("7289"),n("2aed"),n("d72f"),n("b933"),n("0b6c"),n("9b74"),n("832b"),n("8822"),n("b255")),s=(n("cfa9"),n("685c")),l=n("83d6"),c={name:"app_main",components:{codemirror:o["codemirror"]},props:{},filters:{statusFilter:function(t){var e={running:"success",stopped:"info",success:"success",error:"danger"};return e[t]},statusFilter2:function(t){var e={running:"el-icon-loading",stopped:"el-icon-error",success:"el-icon-success",error:"el-icon-warning"};return e[t]}},data:function(){var t=l.test_code;return{code:t,response_info:"",status:"stopped",envi_value:"",disable_appname:!1,log_display_id:"output-small",form:{app_name:"",image_name:"",run_command:"",run_type:"first",app_type:"",timeout:"",use_network:!1,control_performance:!1,network:"none",cpu_count:1,cpu_percent:100,mem_limit:""},marks:{0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"},images_list:["tensorflow-flask"],cmOption:{autoCloseBrackets:!0,tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!0,mode:"text/x-python",theme:"base16-light",matchBrackets:!0,lineWrapping:!0,lint:!0,hint:!0}}},created:function(){var t=this;Object(s["c"])().then((function(e){t.images_list=e.data.res})),"modified"===this.$route.query.run_type&&this.info_init(this.$route.query.app_name),this.socketIO.on("print_log",(function(e){if(e.app_name===t.form.app_name){var n=document.getElementById("result");n.scrollTop=88888888,console.log("msg",e),t.response_info=t.response_info+e.data,n.scrollTop=88888888}}))},updated:function(){var t=document.getElementById("result");t.scrollTop=88888888},mounted:function(){},methods:{info_init:function(t){var e=this;Object(i["getApp_info"])({app_name:t}).then((function(t){e.disable_appname=!0,e.form=t.data.res,e.status=t.data.res.status,e.form.run_type="modified",e.code=t.data.res.code}))},onCmCodeChange:function(t){this.code=t},log_display:function(){"output-small"===this.log_display_id?this.log_display_id="output-big":this.log_display_id="output-small"},submit_code:function(){var t=this;this.response_info="",Object(i["app_submit"])({code:this.code,app_name:this.form.app_name,image_name:this.form.image_name,run_command:this.form.run_command,run_type:this.form.run_type,app_type:this.form.app_type,timeout:this.form.timeout,network:this.form.network}).then((function(e){1===e.data.status&&(t.status="running")})).catch((function(e){console.log(e),t.errored=!0})).finally((function(e){return t.loading=!1}))}}},u=c,p=(n("ac5f"),n("2877")),m=Object(p["a"])(u,r,a,!1,null,"0e0a0cd1",null);e["default"]=m.exports},ac5f:function(t,e,n){"use strict";n("f790")},b255:function(t,e,n){"use strict";n.r(e),n.d(e,"app_submit",(function(){return a})),n.d(e,"getList",(function(){return o})),n.d(e,"getApp_start",(function(){return i})),n.d(e,"getApp_stop",(function(){return s})),n.d(e,"getApp_delete",(function(){return l})),n.d(e,"getContainerr_list",(function(){return c})),n.d(e,"getApp_info",(function(){return u})),n.d(e,"getApp_log",(function(){return p})),n.d(e,"getApp_performance",(function(){return m}));var r=n("b775");function a(t){return Object(r["a"])({url:"/app_submit",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/app_list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/app_start",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/app_stop",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/app_delete",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/container_list",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/app_getinfo",method:"get",params:t})}function p(t){return Object(r["a"])({url:"/app_getlog",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/app_getperformance",method:"get",params:t})}},db91:function(t,e,n){(function(t){t(n("56b3"))})((function(t){"use strict";function e(t){return new RegExp("^(("+t.join(")|(")+"))\\b")}var n=e(["and","or","not","is"]),r=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],a=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];function o(t){return t.scopes[t.scopes.length-1]}t.registerHelper("hintWords","python",r.concat(a)),t.defineMode("python",(function(i,s){for(var l="error",c=s.delimiters||s.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/,u=[s.singleOperators,s.doubleOperators,s.doubleDelimiters,s.tripleDelimiters,s.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/],p=0;p<u.length;p++)u[p]||u.splice(p--,1);var m=s.hangingIndent||i.indentUnit,f=r,d=a;void 0!=s.extra_keywords&&(f=f.concat(s.extra_keywords)),void 0!=s.extra_builtins&&(d=d.concat(s.extra_builtins));var b=!(s.version&&Number(s.version)<3);if(b){var _=s.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;f=f.concat(["nonlocal","False","True","None","async","await"]),d=d.concat(["ascii","bytes","exec","print"]);var g=new RegExp("^(([rbuf]|(br)|(fr))?('{3}|\"{3}|['\"]))","i")}else{_=s.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;f=f.concat(["exec","print"]),d=d.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);g=new RegExp("^(([rubf]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var h=e(f),v=e(d);function y(t,e){var n=t.sol()&&"\\"!=e.lastToken;if(n&&(e.indent=t.indentation()),n&&"py"==o(e).type){var r=o(e).offset;if(t.eatSpace()){var a=t.indentation();return a>r?O(e):a<r&&C(t,e)&&"#"!=t.peek()&&(e.errorToken=!0),null}var i=k(t,e);return r>0&&C(t,e)&&(i+=" "+l),i}return k(t,e)}function k(t,e,r){if(t.eatSpace())return null;if(!r&&t.match(/^#.*/))return"comment";if(t.match(/^[0-9\.]/,!1)){var a=!1;if(t.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(a=!0),t.match(/^[\d_]+\.\d*/)&&(a=!0),t.match(/^\.\d+/)&&(a=!0),a)return t.eat(/J/i),"number";var o=!1;if(t.match(/^0x[0-9a-f_]+/i)&&(o=!0),t.match(/^0b[01_]+/i)&&(o=!0),t.match(/^0o[0-7_]+/i)&&(o=!0),t.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(t.eat(/J/i),o=!0),t.match(/^0(?![\dx])/i)&&(o=!0),o)return t.eat(/L/i),"number"}if(t.match(g)){var i=-1!==t.current().toLowerCase().indexOf("f");return i?(e.tokenize=w(t.current(),e.tokenize),e.tokenize(t,e)):(e.tokenize=x(t.current(),e.tokenize),e.tokenize(t,e))}for(var s=0;s<u.length;s++)if(t.match(u[s]))return"operator";return t.match(c)?"punctuation":"."==e.lastToken&&t.match(_)?"property":t.match(h)||t.match(n)?"keyword":t.match(v)?"builtin":t.match(/^(self|cls)\b/)?"variable-2":t.match(_)?"def"==e.lastToken||"class"==e.lastToken?"def":"variable":(t.next(),r?null:l)}function w(t,e){while("rubf".indexOf(t.charAt(0).toLowerCase())>=0)t=t.substr(1);var n=1==t.length,r="string";function a(t){return function(e,n){var r=k(e,n,!0);return"punctuation"==r&&("{"==e.current()?n.tokenize=a(t+1):"}"==e.current()&&(n.tokenize=t>1?a(t-1):o)),r}}function o(o,i){while(!o.eol())if(o.eatWhile(/[^'"\{\}\\]/),o.eat("\\")){if(o.next(),n&&o.eol())return r}else{if(o.match(t))return i.tokenize=e,r;if(o.match("{{"))return r;if(o.match("{",!1))return i.tokenize=a(0),o.current()?r:i.tokenize(o,i);if(o.match("}}"))return r;if(o.match("}"))return l;o.eat(/['"]/)}if(n){if(s.singleLineStringErrors)return l;i.tokenize=e}return r}return o.isString=!0,o}function x(t,e){while("rubf".indexOf(t.charAt(0).toLowerCase())>=0)t=t.substr(1);var n=1==t.length,r="string";function a(a,o){while(!a.eol())if(a.eatWhile(/[^'"\\]/),a.eat("\\")){if(a.next(),n&&a.eol())return r}else{if(a.match(t))return o.tokenize=e,r;a.eat(/['"]/)}if(n){if(s.singleLineStringErrors)return l;o.tokenize=e}return r}return a.isString=!0,a}function O(t){while("py"!=o(t).type)t.scopes.pop();t.scopes.push({offset:o(t).offset+i.indentUnit,type:"py",align:null})}function z(t,e,n){var r=t.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:t.column()+1;e.scopes.push({offset:e.indent+m,type:n,align:r})}function C(t,e){var n=t.indentation();while(e.scopes.length>1&&o(e).offset>n){if("py"!=o(e).type)return!0;e.scopes.pop()}return o(e).offset!=n}function j(t,e){t.sol()&&(e.beginningOfLine=!0);var n=e.tokenize(t,e),r=t.current();if(e.beginningOfLine&&"@"==r)return t.match(_,!1)?"meta":b?"operator":l;if(/\S/.test(r)&&(e.beginningOfLine=!1),"variable"!=n&&"builtin"!=n||"meta"!=e.lastToken||(n="meta"),"pass"!=r&&"return"!=r||(e.dedent+=1),"lambda"==r&&(e.lambda=!0),":"!=r||e.lambda||"py"!=o(e).type||O(e),1==r.length&&!/string|comment/.test(n)){var a="[({".indexOf(r);if(-1!=a&&z(t,e,"])}".slice(a,a+1)),a="])}".indexOf(r),-1!=a){if(o(e).type!=r)return l;e.indent=e.scopes.pop().offset-m}}return e.dedent>0&&t.eol()&&"py"==o(e).type&&(e.scopes.length>1&&e.scopes.pop(),e.dedent-=1),n}var A={startState:function(t){return{tokenize:y,scopes:[{offset:t||0,type:"py",align:null}],indent:t||0,lastToken:null,lambda:!1,dedent:0}},token:function(t,e){var n=e.errorToken;n&&(e.errorToken=!1);var r=j(t,e);return r&&"comment"!=r&&(e.lastToken="keyword"==r||"punctuation"==r?t.current():r),"punctuation"==r&&(r=null),t.eol()&&e.lambda&&(e.lambda=!1),n?r+" "+l:r},indent:function(e,n){if(e.tokenize!=y)return e.tokenize.isString?t.Pass:0;var r=o(e),a=r.type==n.charAt(0);return null!=r.align?r.align-(a?1:0):r.offset-(a?m:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return A})),t.defineMIME("text/x-python","python");var i=function(t){return t.split(" ")};t.defineMIME("text/x-cython",{name:"python",extra_keywords:i("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")})}))},f790:function(t,e,n){}}]);